# jj-sync

ワークスペースフォルダが3分間アイドル状態になった時に、Jujutsu（jj）の変更を自動的にコミットしプッシュします。

## 機能

- ワークスペースフォルダ内のファイル作成/変更/削除/リネームを監視します。
- ファイル活動がない状態が3分間続いたら、`jj commit` と `jj git push -b main` を実行します。
- 起動時、1分間隔、およびプッシュ前にプルします（`jj git fetch` + `jj git import`）。
- `.jj/` 以下の変更は無視します（フィードバックループを避けるため）。
- `.gitignore` がない場合、ユーザーが明示的に有効にするまでは同期がブロックされます。

## 必要な環境

- `jj` が PATH で利用可能である必要があります。
- `jj git push -b main` のために Git リモートが存在する必要があります。
- VS Code 1.63+ が必要です（`vscode.workspace.onDidRenameFiles` を使用）。

## 拡張機能の設定

- `jjSync.enabled`: このワークスペースフォルダで自動同期を有効にします（スコープ: resource）。

## 使い方

1. ワークスペースフォルダを開きます。
2. フォルダ設定で `jjSync.enabled` を `true` に設定します。
3. 変更を加えて3分間のアイドル状態を待ちます。

## 既知の問題

- プルが失敗した場合、次のファイル変更後に再試行し、通知を表示します。
